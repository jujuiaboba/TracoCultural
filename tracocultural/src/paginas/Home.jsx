import React, { useState } from 'react'
import { useNavigate } from 'react-router-dom'
import Navbar from '../componentes/Navbar'
import '../estilos/HomePage.css'
import '../estilos/Modal.css'

const estadosBR = [
  { sigla: 'AC', nome: 'Acre' },
  { sigla: 'AL', nome: 'Alagoas' },
  { sigla: 'AP', nome: 'Amap√°' },
  { sigla: 'AM', nome: 'Amazonas' },
  { sigla: 'BA', nome: 'Bahia' },
  { sigla: 'CE', nome: 'Cear√°' },
  { sigla: 'DF', nome: 'Distrito Federal' },
  { sigla: 'ES', nome: 'Esp√≠rito Santo' },
  { sigla: 'GO', nome: 'Goi√°s' },
  { sigla: 'MA', nome: 'Maranh√£o' },
  { sigla: 'MT', nome: 'Mato Grosso' },
  { sigla: 'MS', nome: 'Mato Grosso do Sul' },
  { sigla: 'MG', nome: 'Minas Gerais' },
  { sigla: 'PA', nome: 'Par√°' },
  { sigla: 'PB', nome: 'Para√≠ba' },
  { sigla: 'PR', nome: 'Paran√°' },
  { sigla: 'PE', nome: 'Pernambuco' },
  { sigla: 'PI', nome: 'Piau√≠' },
  { sigla: 'RJ', nome: 'Rio de Janeiro' },
  { sigla: 'RN', nome: 'Rio Grande do Norte' },
  { sigla: 'RS', nome: 'Rio Grande do Sul' },
  { sigla: 'RO', nome: 'Rond√¥nia' },
  { sigla: 'RR', nome: 'Roraima' },
  { sigla: 'SC', nome: 'Santa Catarina' },
  { sigla: 'SP', nome: 'S√£o Paulo' },
  { sigla: 'SE', nome: 'Sergipe' },
  { sigla: 'TO', nome: 'Tocantins' }
]

const Home = ({ user, onLogout }) => {
  const [showFilterModal, setShowFilterModal] = useState(false)
  const [showEventModal, setShowEventModal] = useState(false)
  const [selectedEvent, setSelectedEvent] = useState(null)

  // estado para selects / filtros
  const [uf, setUf] = useState('') // '' = todos os estados
  const [category, setCategory] = useState('Todas')
  const [dateFilter, setDateFilter] = useState('')

  const navigate = useNavigate()

  const eventDetails = {
    'Beleza em Foco 2025': {
      image: 'src/assets/EVENTOCABELOS.jpg',
      title: 'üíá‚Äç‚ôÄÔ∏è Beleza em Foco 2025',
      date: '12 a 14 de mar√ßo de 2025',
      location: 'S√£o Paulo ‚Äì SP',
      description:
        'O Beleza em Foco 2025 √© o evento mais aguardado do ano para quem ama o universo dos cabelos, est√©tica e bem-estar. Durante tr√™s dias, profissionais renomados e marcas l√≠deres do mercado se re√∫nem para compartilhar tend√™ncias, t√©cnicas e inova√ß√µes que est√£o transformando o setor da beleza.\n\nWorkshops pr√°ticos, demonstra√ß√µes ao vivo, palestras inspiradoras e lan√ßamentos de produtos fazem parte da programa√ß√£o. O p√∫blico poder√° experimentar novas linhas de cosm√©ticos, aprender diretamente com especialistas e descobrir solu√ß√µes sustent√°veis para o cuidado capilar.\n\nMais do que um encontro profissional, o evento √© um verdadeiro festival de criatividade, autoestima e conex√£o entre pessoas apaixonadas por beleza.'
    },
    'Car Date': {
      image: 'src/assets/EVENTOCARROS.jpg',
      title: 'üöó Car Date ‚Äì Encontro Automotivo',
      date: '25 de abril de 2025',
      location: 'Curitiba ‚Äì PR',
      description:
        'O Car Date re√∫ne os maiores entusiastas do mundo automotivo em um √∫nico espa√ßo. √â o ponto de encontro de quem respira motores, design e velocidade. O evento traz exposi√ß√µes de supercarros, ve√≠culos customizados e lan√ßamentos exclusivos das principais montadoras.\n\nAl√©m disso, o p√∫blico poder√° acompanhar desfiles tem√°ticos, participar de desafios de arrancada e conhecer pilotos e colecionadores de todo o Brasil. Uma √°rea gastron√¥mica com food trucks, m√∫sica ao vivo e espa√ßos interativos garantem um ambiente vibrante para toda a fam√≠lia.\n\nPara quem ama carros ‚Äî sejam cl√°ssicos, esportivos ou tunados ‚Äî o Car Date √© uma experi√™ncia inesquec√≠vel sobre rodas.'
    },
    CinemaLivre: {
      image: 'src/assets/EVENTOCINEMA.jpg',
      title: 'üé¨ Cinema ao Ar Livre',
      date: '3 e 4 de maio de 2025',
      location: 'Belo Horizonte ‚Äì MG',
      description:
        'O Cinema ao Ar Livre transforma as noites da capital mineira em um verdadeiro espet√°culo sob as estrelas. O evento convida o p√∫blico a viver uma experi√™ncia cinematogr√°fica √∫nica, com proje√ß√µes em tela gigante em um ambiente ao ar livre, repleto de luzes, conforto e boa comida.\n\nDurante dois dias, ser√£o exibidos cl√°ssicos do cinema, filmes nacionais e produ√ß√µes independentes, com curadoria especial para todos os gostos. Sess√µes infantis, romances, aventuras e document√°rios far√£o parte da programa√ß√£o.\n\nCom entrada gratuita e estrutura acolhedora, o evento incentiva a cultura, o lazer e o conv√≠vio social ‚Äî unindo pessoas atrav√©s da magia do cinema.'
    },
    'Cultivo Coletivo 2025': {
      image: 'src/assets/EVENTOCULTIVO.jpg',
      title: 'üå± Cultivo Coletivo 2025',
      date: '10 de junho de 2025',
      location: 'Florian√≥polis ‚Äì SC',
      description:
        'O Cultivo Coletivo 2025 √© um encontro voltado √† sustentabilidade, agricultura urbana e bem-estar. Reunindo agricultores, ambientalistas, empreendedores e cidad√£os conscientes, o evento promove um espa√ßo de aprendizado sobre como cultivar uma vida mais verde e equilibrada.\n\nSer√£o oferecidos cursos pr√°ticos sobre hortas dom√©sticas, compostagem, plantio inteligente e alimenta√ß√£o org√¢nica. Palestras e rodas de conversa abordar√£o temas como economia circular, consumo consciente e impacto ambiental.\n\nO p√∫blico poder√° tamb√©m visitar feiras ecol√≥gicas, trocar sementes e participar de oficinas de jardinagem. Uma experi√™ncia que une natureza, conhecimento e comunidade.'
    },
    'BusiExpo 2025': {
      image: 'src/assets/EVENTOEMPRESA.jpg',
      title: 'üíº Business Expo 2025',
      date: '22 a 24 de agosto de 2025',
      location: 'Bras√≠lia ‚Äì DF',
      description:
        'A Business Expo 2025 √© o maior evento de neg√≥cios e inova√ß√£o do pa√≠s. Durante tr√™s dias, empreendedores, investidores e l√≠deres de diferentes setores se encontram para trocar experi√™ncias, fechar parcerias e explorar novas oportunidades de crescimento.\n\nCom uma programa√ß√£o repleta de palestras, pain√©is e workshops, o evento abordar√° temas como tecnologia, empreendedorismo, marketing digital, sustentabilidade e transforma√ß√£o empresarial.\n\nEspa√ßos de networking, estandes interativos e rodadas de neg√≥cios criam o ambiente ideal para quem busca expandir seus horizontes e impulsionar resultados. Mais do que uma feira, a Business Expo √© um ponto de virada para quem acredita que o futuro dos neg√≥cios come√ßa com boas conex√µes.'
    },
    'Fresio Festival': {
      image: 'src/assets/EVENTOFESTA.jpg',
      title: 'üéâ Fresio Festival',
      date: '7 e 8 de setembro de 2025',
      location: 'Recife ‚Äì PE',
      description:
        'O Fresio Festival √© pura energia, cor e alegria! Um evento ao ar livre que celebra o ver√£o, a m√∫sica e a cultura pernambucana com dois dias intensos de divers√£o e boas vibra√ß√µes.\n\nCom uma programa√ß√£o musical diversa, o festival traz artistas locais e nacionais, al√©m de DJs que animam o p√∫blico at√© o p√¥r do sol. Espa√ßos instagram√°veis, √°reas de descanso e uma vila gastron√¥mica com comidas t√≠picas tornam a experi√™ncia ainda mais completa.\n\nEntre um show e outro, os visitantes podem participar de ativa√ß√µes interativas, jogos e oficinas culturais. O Fresio Festival √© o destino certo para quem quer viver o melhor da esta√ß√£o cercado de m√∫sica, amigos e boas mem√≥rias.'
    },
    'Festival do Dia das Crian√ßas': {
      image: 'src/assets/EVENTOFESTIVAL.jpg',
      title: 'üé† Festival do Dia das Crian√ßas',
      date: '12 de outubro de 2025',
      location: 'Salvador ‚Äì BA',
      description:
        'O Festival do Dia das Crian√ßas √© um dia dedicado inteiramente √† imagina√ß√£o e √† alegria dos pequenos! O evento re√∫ne brinquedos gigantes, apresenta√ß√µes art√≠sticas, shows infantis e diversas atividades educativas.\n\nCom estrutura segura e ambiente familiar, o festival oferece oficinas de arte, conta√ß√£o de hist√≥rias, teatro infantil, pintura facial e muito mais. Al√©m disso, os pais podem aproveitar √°reas de descanso e alimenta√ß√£o com op√ß√µes variadas.\n\n√â um evento que celebra a inf√¢ncia em toda sua magia ‚Äî um dia para criar mem√≥rias inesquec√≠veis em fam√≠lia.'
    },
    'Book Fair': {
      image: 'src/assets/EVENTOLIVROS.jpg',
      title: 'üìö Book Fair ‚Äì Feira Liter√°ria',
      date: '19 a 22 de outubro de 2025',
      location: 'Porto Alegre ‚Äì RS',
      description:
        'A Book Fair √© um dos maiores encontros liter√°rios do sul do Brasil. O evento re√∫ne editoras, escritores e leitores apaixonados pela arte das palavras.\n\nDurante quatro dias, o p√∫blico poder√° participar de sess√µes de aut√≥grafos, lan√ßamentos exclusivos, debates e oficinas de escrita criativa. A feira tamb√©m conta com uma √°rea infantil, promovendo o incentivo √† leitura desde cedo.\n\nAl√©m dos livros, h√° apresenta√ß√µes culturais, caf√©s liter√°rios e espa√ßos de conviv√™ncia. A Book Fair √© um convite para descobrir novas hist√≥rias e redescobrir o prazer de ler.'
    },
    'Natal Encantado de Gramado': {
      image: 'src/assets/EVENTONATAL.jpg',
      title: 'üéÑ Natal Encantado de Gramado',
      date: '5 a 28 de dezembro de 2025',
      location: 'Gramado ‚Äì RS',
      description:
        'O Natal Encantado de Gramado √© um dos eventos mais m√°gicos do ano. A cidade se transforma em um verdadeiro cen√°rio de conto de fadas, iluminada por milh√µes de luzes e repleta de atra√ß√µes natalinas.\n\nDesfiles tem√°ticos, espet√°culos musicais, corais e feiras de artesanato criam um clima acolhedor e festivo. Crian√ßas e adultos se encantam com a presen√ßa do Papai Noel e com as apresenta√ß√µes teatrais que revivem o esp√≠rito natalino.\n\nMais do que uma celebra√ß√£o, o evento √© uma experi√™ncia sensorial e emocional que renova o sentimento de esperan√ßa e uni√£o.'
    },
    'Os Quintessenciais': {
      image: 'src/assets/EVENTOTEATRO.jpg',
      title: 'üé≠ Os Quintessenciais ‚Äì A Com√©dia do Ano',
      date: '15 de novembro de 2025',
      location: 'Rio de Janeiro ‚Äì RJ',
      description:
        'A pe√ßa Os Quintessenciais promete arrancar gargalhadas e emo√ß√µes do p√∫blico carioca. Com um elenco talentoso e roteiro envolvente, a com√©dia retrata o cotidiano de uma fam√≠lia cheia de personalidades fortes, enfrentando as pequenas confus√µes do dia a dia.\n\nEntre risadas e reflex√µes, o espet√°culo aborda temas como amor, conviv√™ncia, identidade e perd√£o, de forma leve e divertida.\n\nEncenada em um dos teatros mais tradicionais do Rio, a pe√ßa oferece uma experi√™ncia teatral envolvente, que combina humor, emo√ß√£o e mensagens profundas sobre a vida moderna.'
    }
  }

  const handleVerMais = (eventTitle) => {
    setSelectedEvent(eventDetails[eventTitle])
    setShowEventModal(true)
  }

  return (
    <div className="home-page">
      <Navbar onLogout={onLogout} />

      <section className="search-section">
        <div className="search-container">
          <input
            type="text"
            className="search-input"
            placeholder="Pesquisar eventos..."
          />

          {/* Select controlado para localiza√ß√£o */}
          <select
            className="location-select"
            value={uf}
            onChange={(e) => setUf(e.target.value)}
            aria-label="Selecionar estado"
          >
            <option value="">Todos os estados</option>
            {estadosBR.map((s) => (
              <option key={s.sigla} value={s.sigla}>
                {s.sigla}
              </option>
            ))}
          </select>

          <button
            className="filter-button"
            onClick={() => setShowFilterModal(true)}
          >
            Filtros
          </button>
        </div>
      </section>

      <section className="title-section">
        <h2 className="main-title">O que vamos fazer?</h2>
      </section>

      <main className="events-grid">
        <div className="event-card">
          <img
            src="src/assets/EVENTOCABELOS.jpg"
            alt="Beleza em Foco 2025"
            className="event-image"
          />
          <div className="event-content">
            <h3 className="event-title">üíá‚Äç‚ôÄÔ∏è Beleza em Foco 2025</h3>
            <p className="event-type">Beleza</p>
            <p className="event-date">12 a 14 de mar√ßo de 2025</p>
            <p className="event-location">üìç S√£o Paulo ‚Äì SP</p>
            <div className="event-actions">
              <button
                className="btn-ver-mais"
                onClick={() => handleVerMais('Beleza em Foco 2025')}
              >
                Ver mais
              </button>
              <button className="btn-favoritar">
                <i className="bi bi-heart"></i>
              </button>
            </div>
          </div>
        </div>

        <div className="event-card">
          <img
            src="src/assets/EVENTOCARROS.jpg"
            alt="Car Date"
            className="event-image"
          />
          <div className="event-content">
            <h3 className="event-title">üöó Car Date ‚Äì Encontro Automotivo</h3>
            <p className="event-type">Automotivo</p>
            <p className="event-date">25 de abril de 2025</p>
            <p className="event-location">üìç Curitiba ‚Äì PR</p>
            <div className="event-actions">
              <button className="btn-ver-mais" onClick={() => handleVerMais('Car Date')}>Ver mais</button>
              <button className="btn-favoritar"><i className="bi bi-heart"></i></button>
            </div>
          </div>
        </div>

        <div className="event-card">
          <img
            src="src/assets/EVENTOCINEMA.jpg"
            alt="CinemaLivre"
            className="event-image"
          />
          <div className="event-content">
            <h3 className="event-title">üé¨ CinemaLivre</h3>
            <p className="event-type">Cinema</p>
            <p className="event-date">3 e 4 de maio de 2025</p>
            <p className="event-location">üìç Belo Horizonte ‚Äì MG</p>
            <div className="event-actions">
              <button className="btn-ver-mais" onClick={() => handleVerMais('CinemaLivre')}>Ver mais</button>
              <button className="btn-favoritar"><i className="bi bi-heart"></i></button>
            </div>
          </div>
        </div>

        <div className="event-card">
          <img
            src="src/assets/EVENTOCULTIVO.jpg"
            alt="Cultivo Coletivo 2025"
            className="event-image"
          />
          <div className="event-content">
            <h3 className="event-title">üå± Cultivo Coletivo 2025</h3>
            <p className="event-type">Sustentabilidade</p>
            <p className="event-date">10 de junho de 2025</p>
            <p className="event-location">üìç Florian√≥polis ‚Äì SC</p>
            <div className="event-actions">
              <button className="btn-ver-mais" onClick={() => handleVerMais('Cultivo Coletivo 2025')}>Ver mais</button>
              <button className="btn-favoritar"><i className="bi bi-heart"></i></button>
            </div>
          </div>
        </div>

        <div className="event-card">
          <img
            src="src/assets/EVENTOEMPRESA.jpg"
            alt="BusiExpo 2025"
            className="event-image"
          />
          <div className="event-content">
            <h3 className="event-title">üíº BusiExpo 2025</h3>
            <p className="event-type">Neg√≥cios</p>
            <p className="event-date">22 a 24 de agosto de 2025</p>
            <p className="event-location">üìç Bras√≠lia ‚Äì DF</p>
            <div className="event-actions">
              <button className="btn-ver-mais" onClick={() => handleVerMais('BusiExpo 2025')}>Ver mais</button>
              <button className="btn-favoritar"><i className="bi bi-heart"></i></button>
            </div>
          </div>
        </div>

        <div className="event-card">
          <img
            src="src/assets/EVENTOFESTA.jpg"
            alt="Fresio Festival"
            className="event-image"
          />
          <div className="event-content">
            <h3 className="event-title">üéâ Fresio Festival</h3>
            <p className="event-type">Festival</p>
            <p className="event-date">7 e 8 de setembro de 2025</p>
            <p className="event-location">üìç Recife ‚Äì PE</p>
            <div className="event-actions">
              <button className="btn-ver-mais" onClick={() => handleVerMais('Fresio Festival')}>Ver mais</button>
              <button className="btn-favoritar"><i className="bi bi-heart"></i></button>
            </div>
          </div>
        </div>

        <div className="event-card">
          <img
            src="src/assets/EVENTOFESTIVAL.jpg"
            alt="Festival do Dia das Crian√ßas"
            className="event-image"
          />
          <div className="event-content">
            <h3 className="event-title">üé† Festival do Dia das Crian√ßas</h3>
            <p className="event-type">Infantil</p>
            <p className="event-date">12 de outubro de 2025</p>
            <p className="event-location">üìç Salvador ‚Äì BA</p>
            <div className="event-actions">
              <button className="btn-ver-mais" onClick={() => handleVerMais('Festival do Dia das Crian√ßas')}>Ver mais</button>
              <button className="btn-favoritar"><i className="bi bi-heart"></i></button>
            </div>
          </div>
        </div>

        <div className="event-card">
          <img
            src="src/assets/EVENTOLIVROS.jpg"
            alt="Book Fair"
            className="event-image"
          />
          <div className="event-content">
            <h3 className="event-title">üìö Book Fair ‚Äì Feira Liter√°ria</h3>
            <p className="event-type">Literatura</p>
            <p className="event-date">19 a 22 de outubro de 2025</p>
            <p className="event-location">üìç Porto Alegre ‚Äì RS</p>
            <div className="event-actions">
              <button className="btn-ver-mais" onClick={() => handleVerMais('Book Fair')}>Ver mais</button>
              <button className="btn-favoritar"><i className="bi bi-heart"></i></button>
            </div>
          </div>
        </div>

        <div className="event-card">
          <img
            src="src/assets/EVENTONATAL.jpg"
            alt="Natal Encantado de Gramado"
            className="event-image"
          />
          <div className="event-content">
            <h3 className="event-title">üéÑ Natal Encantado de Gramado</h3>
            <p className="event-type">Natal</p>
            <p className="event-date">5 a 28 de dezembro de 2025</p>
            <p className="event-location">üìç Gramado ‚Äì RS</p>
            <div className="event-actions">
              <button className="btn-ver-mais" onClick={() => handleVerMais('Natal Encantado de Gramado')}>Ver mais</button>
              <button className="btn-favoritar"><i className="bi bi-heart"></i></button>
            </div>
          </div>
        </div>

        <div className="event-card">
          <img
            src="src/assets/EVENTOTEATRO.jpg"
            alt="Os Quintessenciais"
            className="event-image"
          />
          <div className="event-content">
            <h3 className="event-title">üé≠ Os Quintessenciais ‚Äì A Com√©dia do Ano</h3>
            <p className="event-type">Teatro</p>
            <p className="event-date">15 de novembro de 2025</p>
            <p className="event-location">üìç Rio de Janeiro ‚Äì RJ</p>
            <div className="event-actions">
              <button className="btn-ver-mais" onClick={() => handleVerMais('Os Quintessenciais')}>Ver mais</button>
              <button className="btn-favoritar"><i className="bi bi-heart"></i></button>
            </div>
          </div>
        </div>
      </main>

      {showFilterModal && (
        <div
          className="modal-overlay"
          onClick={() => setShowFilterModal(false)}
        >
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <h3>Filtros</h3>

            <div className="filter-group">
              <label>Categoria:</label>
              <select
                value={category}
                onChange={(e) => setCategory(e.target.value)}
                aria-label="Selecionar categoria"
              >
                <option value="Todas">Todas</option>
                <option value="M√∫sica">M√∫sica</option>
                <option value="Arte">Arte</option>
                <option value="Teatro">Teatro</option>
                <option value="Dan√ßa">Dan√ßa</option>
              </select>
            </div>

            <div className="filter-group">
              <label>Data:</label>
              <input
                type="date"
                value={dateFilter}
                onChange={(e) => setDateFilter(e.target.value)}
              />
            </div>

            <div className="modal-actions">
              <button onClick={() => setShowFilterModal(false)}>Aplicar</button>
              <button onClick={() => setShowFilterModal(false)}>Cancelar</button>
            </div>
          </div>
        </div>
      )}

      {/* Modal de Detalhes do Evento */}
      {showEventModal && selectedEvent && (
        <div className="modal-overlay" onClick={() => setShowEventModal(false)}>
          <div className="event-modal-content" onClick={(e) => e.stopPropagation()}>
            <button className="modal-close" onClick={() => setShowEventModal(false)}>√ó</button>

            <div className="event-modal-header">
              <img src={selectedEvent.image} alt={selectedEvent.title} className="event-modal-image" />

              <div className="event-modal-info-section">
                <h2 className="event-modal-title">{selectedEvent.title}</h2>
                <p className="event-modal-info">üìÖ {selectedEvent.date} | üìç {selectedEvent.location}</p>

                <div className="event-modal-actions">
                  <button className="btn-ingressos">INGRESSOS</button>
                  <button className="btn-icon"><i className="bi bi-share"></i></button>
                  <button className="btn-icon"><i className="bi bi-heart"></i></button>
                </div>
              </div>
            </div>

            <div className="event-modal-body">
              <div className="event-modal-description">
                {selectedEvent.description.split('\n\n').map((paragraph, index) => (
                  <p key={index}>{paragraph}</p>
                ))}
              </div>

              <div className="comments-section">
                <h3 className="comments-title">Avalia√ß√µes e Coment√°rios</h3>

                <div className="comment-form">
                  <textarea
                    className="comment-input"
                    placeholder="Deixe seu coment√°rio sobre o evento..."
                    rows="3"
                  ></textarea>
                  <button className="comment-submit">Enviar</button>
                </div>

                <div className="comments-list">
                  <div className="comment-item">
                    <div className="comment-author">Maria Silva</div>
                    <div className="comment-text">Evento incr√≠vel! Super recomendo para quem gosta de arte e cultura.</div>
                  </div>
                  <div className="comment-item">
                    <div className="comment-author">Jo√£o Santos</div>
                    <div className="comment-text">Organiza√ß√£o perfeita e programa√ß√£o diversificada. J√° estou ansioso para o pr√≥ximo!</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}

export default Home
